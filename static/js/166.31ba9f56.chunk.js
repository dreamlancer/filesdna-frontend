(this.webpackJsonpfilesdna=this.webpackJsonpfilesdna||[]).push([[166],{1902:function(e,a,t){"use strict";t.r(a);t(204);var n=t(205),r=t(84),c=t(43),l=(t(115),t(85)),i=t(0),s=t.n(i),o=(t(703),t(53)),m=t(788),u=t(123),d=t(35),f=t.n(d),b=(t(94),t(92)),p=(t(65),t(66)),E=(t(147),t(99)),v=(t(72),t(73)),O=t(33),h=(t(137),t(141)),g=t(45),j=t(135),w=t(68),C=(t(69),t(664));var x=function(e){var a=e.visible,t=e.onClose,n=e.handleSubmit,r=e.modalData,l=(void 0===r?{}:r)||{},o=h.a.useForm(),m=Object(c.a)(o,1)[0],u=Object(i.useState)(!1),d=Object(c.a)(u,2),x=d[0],y=d[1];function L(){return(L=Object(O.a)(f.a.mark((function e(a){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y(!0),r=n(a),Object(w.a)(r.status,r.message),y(!1),t();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(j.a)({form:m,visible:a,initVal:{is_selected:!1}}),s.a.createElement(b.a,{title:s.a.createElement(g.a,{id:l.title||"documents.addRecipient"}),visible:a,okText:s.a.createElement(g.a,{id:"common.submit"}),onCancel:x?null:t,onOk:x?null:function(){m.validateFields().then((function(e){!function(e){L.apply(this,arguments)}(e)}))},okButtonProps:{id:"add-user"},confirmLoading:x},s.a.createElement(h.a,{form:m,layout:"vertical"},s.a.createElement(p.a,{gutter:6},s.a.createElement(v.a,{span:16}),s.a.createElement(v.a,{span:8},s.a.createElement(C.a,{placeholder:"common.searchUser",onChange:function(e,a){m.setFieldsValue({first_name:a.first_name,last_name:a.last_name,email:a.email})},visible:!0,sProps:{bordered:!1,optionLabelProp:"label",allowClear:!0,dropdownMatchSelectWidth:!1,style:{minWidth:150}}})),s.a.createElement(v.a,{span:12},s.a.createElement(h.a.Item,{label:s.a.createElement(g.a,{id:"antTable.title.firstName"}),name:"first_name",rules:[{required:!0,message:s.a.createElement(g.a,{id:"req.firstname"})},{max:50,message:s.a.createElement(g.a,{id:"err.max.50char"})},{whitespace:!0,message:s.a.createElement(g.a,{id:"err.blankSpace"})}]},s.a.createElement(E.a,null))),s.a.createElement(v.a,{span:12},s.a.createElement(h.a.Item,{label:s.a.createElement(g.a,{id:"antTable.title.lastName"}),name:"last_name",rules:[{required:!0,message:s.a.createElement(g.a,{id:"req.lastname"})},{max:50,message:s.a.createElement(g.a,{id:"err.max.50char"})},{whitespace:!0,message:s.a.createElement(g.a,{id:"err.blankSpace"})}]},s.a.createElement(E.a,null))),s.a.createElement(v.a,{span:24},s.a.createElement(h.a.Item,{label:s.a.createElement(g.a,{id:"antTable.title.email"}),name:"email",rules:[{required:!0,message:s.a.createElement(g.a,{id:"req.email"})},{type:"email",message:s.a.createElement(g.a,{id:"err.email"})},{max:255,message:s.a.createElement(g.a,{id:"err.max.255char"})}]},s.a.createElement(E.a,null))))))},y=l.a.Option;a.default=function(e){var a=e.contacts,t=e.signer,d=e.setContacts,f=e.changeSigner,b=e.appendData,p=e.setAppendData,E=Object(i.useState)(!1),v=Object(c.a)(E,2),O=v[0],h=v[1];return s.a.createElement("div",{className:"add-signers"},s.a.createElement(x,{visible:O,onClose:function(){return h(!1)},handleSubmit:function(e){return a.filter((function(a){return a.email==e.email})).length>0?{status:"error",message:"There is a recipient with email ".concat(e.email)}:(d([].concat(Object(r.a)(a),[e])),{status:"success",message:"A recipient was added successfully to this document."})}}),s.a.createElement("p",{className:"title"},"Recipient ",s.a.createElement("small",{className:"add-user",onClick:function(){return h(!0)}},"Add new")),s.a.createElement(l.a,{style:{width:"100%"},notFoundContent:null,onChange:function(e,a){var t=a&&(null===a||void 0===a?void 0:a.obj)?null===a||void 0===a?void 0:a.obj:{};f(t)},filterOption:function(e,a){var t=e||"",n=a&&a.obj?a.obj:{};if(!Object(o.isEmpty)(n)){var r=n.email?n.email.toLowerCase():"",c=n.first_name?n.first_name.toLowerCase():"",l=n.last_name?n.last_name.toLowerCase():"";return r.indexOf(t.toLowerCase())>=0||c.indexOf(t.toLowerCase())>=0||l.indexOf(t.toLowerCase())>=0}return!1},value:t?t.email:null},Object(o.isArray)(a)&&a.map((function(e){return s.a.createElement(y,{value:e.email,key:e.email,obj:e},s.a.createElement("div",{style:{backgroundColor:Object(u.C)(Object(u.p)(e.first_name,e.last_name),50,80)},className:"avatar-div"}),s.a.createElement("p",{style:{fontWeight:550,width:"calc( 100% - 30px)",float:"right"}},Object(u.p)(e.first_name,e.last_name),a.length>1&&t.email!=e.email&&s.a.createElement(m.a,{className:"delete-user",onClick:function(t){return function(e,t){e.stopPropagation();var n=a.filter((function(e){return e.email!=t}));d(n),b.forEach((function(e){e.signer.email==t&&(e.signer=n[0])}));var r=Object(o.cloneDeep)(b);p(r)}(t,e.email)}}),s.a.createElement("br",null),e.email))}))),s.a.createElement(n.a,null))}},449:function(e,a,t){"use strict";var n=t(35),r=t.n(n),c=(t(94),t(92)),l=(t(65),t(66)),i=(t(72),t(73)),s=(t(147),t(99)),o=t(33),m=(t(137),t(141)),u=t(43),d=t(0),f=t.n(d),b=t(45),p=t(135),E=t(69),v=t(68);a.a=function(e){var a=e.visible,t=e.onClose,n=e.handleSubmit,O=e.modalData,h=(void 0===O?{}:O)||{},g=m.a.useForm(),j=Object(u.a)(g,1)[0],w=Object(d.useState)(!1),C=Object(u.a)(w,2),x=C[0],y=C[1];function L(){return(L=Object(o.a)(r.a.mark((function e(a){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.prev=1,e.next=4,Object(E.a)("contact/create",a,"POST");case 4:(t=e.sent).success?(Object(v.a)("success",t.message),n()):Object(v.a)("error",t.message),y(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),y(!1),Object(v.a)("error");case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}return Object(p.a)({form:j,visible:a,initVal:{is_selected:!1}}),f.a.createElement(c.a,{title:f.a.createElement(b.a,{id:h.title||"documents.addRecipient"}),visible:a,okText:f.a.createElement(b.a,{id:"common.submit"}),onCancel:x?null:t,onOk:x?null:function(){j.validateFields().then((function(e){!function(e){L.apply(this,arguments)}(e)}))},okButtonProps:{id:"add-user"},confirmLoading:x},f.a.createElement(m.a,{form:j,layout:"vertical"},f.a.createElement(l.a,{gutter:6},f.a.createElement(i.a,{span:12},f.a.createElement(m.a.Item,{label:f.a.createElement(b.a,{id:"antTable.title.firstName"}),name:"first_name",rules:[{required:!0,message:f.a.createElement(b.a,{id:"req.firstname"})},{max:50,message:f.a.createElement(b.a,{id:"err.max.50char"})},{whitespace:!0,message:f.a.createElement(b.a,{id:"err.blankSpace"})}]},f.a.createElement(s.a,null))),f.a.createElement(i.a,{span:12},f.a.createElement(m.a.Item,{label:f.a.createElement(b.a,{id:"antTable.title.lastName"}),name:"last_name",rules:[{required:!0,message:f.a.createElement(b.a,{id:"req.lastname"})},{max:50,message:f.a.createElement(b.a,{id:"err.max.50char"})},{whitespace:!0,message:f.a.createElement(b.a,{id:"err.blankSpace"})}]},f.a.createElement(s.a,null))),f.a.createElement(i.a,{span:24},f.a.createElement(m.a.Item,{label:f.a.createElement(b.a,{id:"antTable.title.email"}),name:"email",rules:[{required:!0,message:f.a.createElement(b.a,{id:"req.email"})},{type:"email",message:f.a.createElement(b.a,{id:"err.email"})},{max:255,message:f.a.createElement(b.a,{id:"err.max.255char"})}]},f.a.createElement(s.a,null))))))}},664:function(e,a,t){"use strict";var n=t(35),r=t.n(n),c=t(84),l=t(29),i=t(33),s=t(43),o=(t(115),t(85)),m=t(0),u=t.n(m),d=t(45),f=t(53),b=t(123),p=t(69),E=t(449),v=o.a.Option;a.a=function(e){var a=e.visible,t=e.onChange,n=void 0===t?function(){}:t,O=e.value,h=e.vlKey,g=void 0===h?"":h,j=e.sProps,w=void 0===j?{}:j,C=e.contacts,x=e.setContacts,y=void 0===x?function(){}:x,L=e.cLoading,_=e.placeholder,k=void 0===_?"":_,S=Object(m.useRef)(null),q=Object(m.useState)({addContactVis:!1,contacts:[],cLoading:!1}),N=Object(s.a)(q,2),T=N[0],V=N[1];function F(){return(F=Object(i.a)(r.a.mark((function e(a){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return V((function(e){return Object(l.a)(Object(l.a)({},e),{},{cLoading:!e.contacts})})),e.prev=1,e.next=4,Object(p.a)("contact/get-contact",a);case 4:(t=e.sent).success?V((function(e){return Object(l.a)(Object(l.a)({},e),{},{contacts:t.data||[],cLoading:!1})})):V((function(e){return Object(l.a)(Object(l.a)({},e),{},{cLoading:!1})})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),V((function(e){return Object(l.a)(Object(l.a)({},e),{},{cLoading:!1})}));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}return Object(m.useEffect)((function(){C&&V((function(e){return Object(l.a)(Object(l.a)({},e),{},{contacts:C,cLoading:L})}))}),[C,L]),Object(m.useEffect)((function(){a&&!C&&function(e){F.apply(this,arguments)}()}),[a]),u.a.createElement(u.a.Fragment,null,u.a.createElement(o.a,Object.assign({showSearch:!0,style:{width:"100%"},ref:S,placeholder:u.a.createElement(d.a,{id:k||"common.searchNew"}),notFoundContent:null,onChange:function(e,a){e&&"new"===e.toString()?V((function(e){return Object(l.a)(Object(l.a)({},e),{},{addContactVis:!0})})):n(e,(null===a||void 0===a?void 0:a.obj)||{})},value:O,filterOption:function(e,a){var t=(null===a||void 0===a?void 0:a.obj)||{},n=(null===a||void 0===a?void 0:a.key)||"";if(!Object(f.isEmpty)(t)){var r=t.email?t.email.toLowerCase():"",c=t.name?t.name.toLowerCase():"",l=t.first_name?t.first_name.toLowerCase():"",i=t.last_name?t.last_name.toLowerCase():"";return r.indexOf(e.toLowerCase())>=0||c.indexOf(e.toLowerCase())>=0||l.indexOf(e.toLowerCase())>=0||i.indexOf(e.toLowerCase())>=0}return"new"===n},loading:T.cLoading},w),u.a.createElement(v,{key:"new"},u.a.createElement("p",{style:{fontWeight:550}},u.a.createElement(d.a,{id:"common.addNew"}))),T.contacts.map((function(e){var a=Object(b.p)(e.first_name,e.last_name);return u.a.createElement(v,{value:e[g||"email"],key:e.id,obj:e,label:u.a.createElement("p",{style:{fontWeight:550}},a)},u.a.createElement("p",{style:{fontWeight:550}},a),u.a.createElement("p",null,e.email))}))),u.a.createElement(E.a,{visible:T.addContactVis,onClose:function(){V((function(e){return Object(l.a)(Object(l.a)({},e),{},{addContactVis:!1})}))},handleSubmit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,t=Object(l.a)(Object(l.a)({},e),{},{name:Object(b.p)(e.first_name,e.last_name)}),r=Object(c.a)(T.contacts);r.push(t),a&&n(t[g||"email"],t),C?(y(r),V((function(e){return Object(l.a)(Object(l.a)({},e),{},{addContactVis:!1})}))):V((function(e){return Object(l.a)(Object(l.a)({},e),{},{contacts:r,addContactVis:!1})}))},modalData:{title:"user.addUser",selText:"document.makeUser"}}))}},788:function(e,a,t){"use strict";var n=t(0),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"}}]},name:"close",theme:"outlined"},c=t(34),l=function(e,a){return n.createElement(c.a,Object.assign({},e,{ref:a,icon:r}))};l.displayName="CloseOutlined";a.a=n.forwardRef(l)}}]);