(this.webpackJsonpfilesdna=this.webpackJsonpfilesdna||[]).push([[125],{1042:function(e,n,t){"use strict";t.r(n);t(65);var a=t(66),r=(t(310),t(312)),c=(t(72),t(73)),o=(t(241),t(244)),i=(t(204),t(205)),l=t(84),s=t(35),u=t.n(s),d=t(29),m=t(33),f=t(43),p=(t(94),t(92)),v=t(0),b=t.n(v),E=t(61),O=t(45),g=t(69),j=t(68),x=t(123),y=t(93),h=t(187),k=t(360),w=t(209),C=t(356),N=t(707),S=p.a.confirm,R=h.a.setUserObj,_=h.a.resetTempSecVerifyProcess,L=["I consign and agree to sign this document, Code 23DX."];n.default=function(e){var n=e.uData,t=e.token,s=e.callback,p=e.guest,h=void 0===p?null:p,M=e.enrollResult,P=Object(y.useDispatch)(),T=Object(v.useState)("NONE"),V=Object(f.a)(T,2),D=V[0],B=V[1],A=Object(v.useState)((function(){return L.map((function(){return null}))})),I=Object(f.a)(A,2),U=I[0],F=I[1],z=Object(v.useState)({}),H=Object(f.a)(z,2),J=H[0],G=H[1],X=J.confidence,q=J.loading,K=J.rLoading,Q=Object(v.useMemo)((function(){return Object(x.k)()}),[]),W=n.is_verify_voice&&0!=n.is_verify_voice,Y=function(){var e=Object(m.a)(u.a.mark((function e(){var a,r,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,G((function(e){return Object(d.a)(Object(d.a)({},e),{},{loading:!0})})),(a=new FormData).append("token",t),a.append("code",Q),a.append("freeUser","undefined"!==typeof s),a.append("email",(null===h||void 0===h?void 0:h.guestEmail)||null),U.forEach((function(e){e&&a.append("audio",e)})),r=h&&h.isGuest?"voice-non-user/verify":"voice/verify",e.next=11,Object(g.a)(r,a,"POST",{},!0);case 11:(c=e.sent).result&&c.confidence>.8?(Object(j.a)("success","voice.succVerified"),G((function(e){return Object(d.a)(Object(d.a)({},e),{},{loading:!1,result:c.result,confidence:c.confidence})})),B("CLEAR"),s?s():W||P(R(Object(d.a)(Object(d.a)({},n),{},{is_verify_voice:1})))):(o=N.a[c.message]||"voice.failedErr",Object(j.a)("error",o),G((function(e){return Object(d.a)(Object(d.a)({},e),{},{loading:!1})}))),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0.message),Object(j.a)("error");case 19:return e.prev=19,G((function(e){return Object(d.a)(Object(d.a)({},e),{},{loading:!1})})),B("NONE"),e.finish(19);case 23:case"end":return e.stop()}}),e,null,[[0,15,19,23]])})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=Object(m.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G((function(e){return Object(d.a)(Object(d.a)({},e),{},{rLoading:!0})})),e.prev=1,e.next=4,Object(g.a)("voice/reset",{},"POST");case 4:e.sent.success,P(R(Object(d.a)(Object(d.a)({},n),{},{is_verify_voice:0}))),Object(j.a)("success","voice.succRemoved"),G((function(e){return Object(d.a)(Object(d.a)({},e),{},{rLoading:!1,result:null,confidence:null})})),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0.message),Object(j.a)("error"),G((function(e){return Object(d.a)(Object(d.a)({},e),{},{rLoading:!1})}));case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),$=1===Object(v.useMemo)((function(){return Object(l.a)(U).filter((function(e){return!!e})).length}),[U]);return b.a.createElement("div",{className:"verifyContainer"},b.a.createElement("div",{className:"titleContent"},s&&b.a.createElement("h1",{className:"voice-title"},"Voice Recognition System"),b.a.createElement("h2",null,b.a.createElement(O.a,{id:W?"voice.testVerifiedVoice":"voice.verifyVoice"})),b.a.createElement("p",null,b.a.createElement(O.a,{id:"".concat(W?"voice.verifyTestSub":"voice.verifySub"),values:{code:b.a.createElement("span",{className:"fw550"},Q)}}))),b.a.createElement("div",null,b.a.createElement(C.a,{index:0,text:b.a.createElement(O.a,{id:"voice.verifyLine1",values:{code:b.a.createElement("span",{className:"fw550"},Q)}}),onSave:function(e){F((function(n){var t=Object(l.a)(n);return t[0]=e,t}))},clear:D}),b.a.createElement("div",null,b.a.createElement(E.a,{className:"mainBtn",onClick:function(){M(!1),P(_())}},b.a.createElement(O.a,{id:"common.cancel"})),b.a.createElement(E.a,{className:"mainBtn",type:"primary",onClick:Y,disabled:!$,loading:q},b.a.createElement(O.a,{id:"settings.verify"})))),X&&b.a.createElement("div",{className:"resultContent"},b.a.createElement(i.a,null),b.a.createElement(a.a,{gutter:[24,24]},b.a.createElement(c.a,{xs:12},b.a.createElement("h4",null,b.a.createElement(O.a,{id:"common.result"})),b.a.createElement("div",null,b.a.createElement(o.a,{message:b.a.createElement(O.a,{id:"voice.".concat(X>.8?"recognised":"notRecognised")}),type:X>.8?"success":"error"}))),b.a.createElement(c.a,{xs:12},b.a.createElement("h4",null,b.a.createElement(O.a,{id:"common.confidence"})),b.a.createElement("div",null,b.a.createElement(r.a,{type:"circle",percent:parseFloat((100*X).toFixed(2))}))))),W?b.a.createElement(b.a.Fragment,null,b.a.createElement(i.a,null),b.a.createElement("div",{className:"deleteVoice"},b.a.createElement("p",null,b.a.createElement(O.a,{id:"voice.deleteVoiceNote"})),b.a.createElement(E.a,{loading:K,onClick:function(){S({title:Object(w.a)("common.areuSure"),content:Object(w.a)("voice.deleteConfirm"),icon:b.a.createElement(k.a,null),maskClosable:!0,okText:Object(w.a)("common.delete"),okButtonProps:{type:"danger",id:"danger-btn"},onOk:function(){Z()}})},size:"small",danger:!0},b.a.createElement(O.a,{id:"voice.deleteVoice"})))):null)}},126:function(e,n,t){"use strict";var a;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(a=t(128))&&a.__esModule?a:{default:a};n.default=r,e.exports=r},128:function(e,n,t){"use strict";var a=t(31),r=t(32);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var c=r(t(0)),o=a(t(129)),i=a(t(37)),l=function(e,n){return c.createElement(i.default,Object.assign({},e,{ref:n,icon:o.default}))};l.displayName="CheckOutlined";var s=c.forwardRef(l);n.default=s},129:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"}},180:function(e,n,t){"use strict";var a=t(5),r=t(4),c=t(56),o=t(50);function i(){var e=Object(a.a)(["\n  & .deleteCircle,\n  & .deleteCircle:hover {\n    color: ",";\n    border-width: 0px;\n  }\n"]);return i=function(){return e},e}var l=r.d.div(i(),Object(c.palette)("error",0));n.a=Object(o.a)(l)},189:function(e,n,t){"use strict";t.d(n,"a",(function(){return E}));var a=t(35),r=t.n(a),c=t(29),o=t(33),i=t(0),l=t.n(i),s=t(297),u=t(61),d=(t(185),t(186).a),m=t(69),f=t(68),p=t(45),v=t(53),b=t(180);function E(e){var n=e.apiUrl,t=e.apiData,a=e.fetchData,i=void 0===a?function(){}:a,E=e.setState,O=void 0===E?function(){}:E,g=e.onConfirm,j=void 0===g?function(){}:g,x=e.btnId,y=e.btnProps,h=void 0===y?{}:y;function k(){return(k=Object(o.a)(r.a.mark((function e(){var a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(v.isObject)(t)||Object(v.isEmpty)(t)){e.next=17;break}return O((function(e){return Object(c.a)(Object(c.a)({},e),{},{loading:!0})})),e.prev=2,e.next=5,Object(m.a)(n,t,"POST");case 5:a=e.sent,o="error",a.success?(o="success",i()):O((function(e){return Object(c.a)(Object(c.a)({},e),{},{loading:!1})})),setTimeout((function(){Object(f.a)(o,a.message)}),200),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),O((function(e){return Object(c.a)(Object(c.a)({},e),{},{loading:!1})})),Object(f.a)("error");case 15:e.next=18;break;case 17:j();case 18:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}return l.a.createElement(b.a,null,l.a.createElement(d,{title:l.a.createElement(p.a,{id:"common.sureDelete"}),okText:l.a.createElement(p.a,{id:"common.deleteCap"}),okButtonProps:{id:"delete-item"},cancelText:l.a.createElement(p.a,{id:"common.no"}),onConfirm:function(){return k.apply(this,arguments)},className:"deleteBtn",onCancel:null},l.a.createElement("div",null,l.a.createElement(u.a,Object.assign({id:x,shape:"circle",danger:!0,icon:l.a.createElement(s.a,null),className:"deleteCircle"},h)))))}},241:function(e,n,t){"use strict";t(28),t(252)},244:function(e,n,t){"use strict";var a=t(25),r=t.n(a),c=t(26),o=t.n(c),i=t(38),l=t.n(i),s=t(0),u=t(106),d=t.n(u),m=t(300),f=t.n(m),p=t(303),v=t.n(p),b=t(301),E=t.n(b),O=t(302),g=t.n(O),j=t(238),x=t.n(j),y=t(201),h=t.n(y),k=t(341),w=t.n(k),C=t(144),N=t.n(C),S=t(105),R=t(24),_=t.n(R),L=t(272);var M=t(88),P=t.n(M),T=t(100),V=t.n(T),D=t(101),B=t.n(D),A=t(102),I=t.n(A),U=function(e){B()(t,e);var n=I()(t);function t(){var e;return P()(this,t),(e=n.apply(this,arguments)).state={error:void 0,info:{componentStack:""}},e}return V()(t,[{key:"componentDidCatch",value:function(e,n){this.setState({error:e,info:n})}},{key:"render",value:function(){var e=this.props,n=e.message,t=e.description,a=e.children,r=this.state,c=r.error,o=r.info,i=o&&o.componentStack?o.componentStack:null,l="undefined"===typeof n?(c||"").toString():n,u="undefined"===typeof t?i:t;return c?s.createElement(X,{type:"error",message:l,description:s.createElement("pre",null,u)}):a}}]),t}(s.Component),F=t(51),z=function(e,n){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(t[a[r]]=e[a[r]])}return t},H={success:x.a,info:w.a,error:N.a,warning:h.a},J={success:f.a,info:E.a,error:g.a,warning:v.a},G=function(e){var n,t=e.description,a=e.prefixCls,c=e.message,i=e.banner,u=e.className,m=void 0===u?"":u,f=e.style,p=e.onMouseEnter,v=e.onMouseLeave,b=e.onClick,E=e.afterClose,O=e.showIcon,g=e.closable,j=e.closeText,x=e.action,y=z(e,["description","prefixCls","message","banner","className","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","action"]),h=s.useState(!1),k=l()(h,2),w=k[0],C=k[1],N=s.useRef(),R=s.useContext(L.b),M=R.getPrefixCls,P=R.direction,T=M("alert",a),V=function(e){var n;C(!0),null===(n=y.onClose)||void 0===n||n.call(y,e)},D=!!j||g,B=function(){var e=y.type;return void 0!==e?e:i?"warning":"info"}(),A=!(!i||void 0!==O)||O,I=_()(T,"".concat(T,"-").concat(B),(n={},o()(n,"".concat(T,"-with-description"),!!t),o()(n,"".concat(T,"-no-icon"),!A),o()(n,"".concat(T,"-banner"),!!i),o()(n,"".concat(T,"-rtl"),"rtl"===P),n),m),U=function(e){return Object.keys(e).reduce((function(n,t){return"data-"!==t.substr(0,5)&&"aria-"!==t.substr(0,5)&&"role"!==t||"data-__"===t.substr(0,7)||(n[t]=e[t]),n}),{})}(y);return s.createElement(S.default,{visible:!w,motionName:"".concat(T,"-motion"),motionAppear:!1,motionEnter:!1,onLeaveStart:function(e){return{maxHeight:e.offsetHeight}},onLeaveEnd:E},(function(e){var n=e.className,a=e.style;return s.createElement("div",r()({ref:N,"data-show":!w,className:_()(I,n),style:r()(r()({},f),a),onMouseEnter:p,onMouseLeave:v,onClick:b,role:"alert"},U),A?function(){var e=y.icon,n=(t?J:H)[B]||null;return e?Object(F.c)(e,s.createElement("span",{className:"".concat(T,"-icon")},e),(function(){return{className:_()("".concat(T,"-icon"),o()({},e.props.className,e.props.className))}})):s.createElement(n,{className:"".concat(T,"-icon")})}():null,s.createElement("div",{className:"".concat(T,"-content")},s.createElement("div",{className:"".concat(T,"-message")},c),s.createElement("div",{className:"".concat(T,"-description")},t)),x?s.createElement("div",{className:"".concat(T,"-action")},x):null,D?s.createElement("button",{type:"button",onClick:V,className:"".concat(T,"-close-icon"),tabIndex:0},j?s.createElement("span",{className:"".concat(T,"-close-text")},j):s.createElement(d.a,null)):null)}))};G.ErrorBoundary=U;var X=n.a=G},252:function(e,n,t){},281:function(e,n,t){"use strict";t(79);var a=t(64);n.a=a.a},282:function(e,n,t){"use strict";var a=t(5),r=t(4),c=t(50);function o(){var e=Object(a.a)(["\n  @keyframes voice_pulse {\n    0% {\n      box-shadow: 0px 0px 5px 0px rgba(214, 214, 214, 0.7);\n    }\n    65% {\n      box-shadow: 0px 0px 5px 13px rgba(214, 214, 214, 0.9);\n    }\n    90% {\n      box-shadow: 0px 0px 5px 13px rgba(214, 214, 214, 0);\n    }\n  }\n\n  & .ant-btn-circle.rec {\n    animation-name: voice_pulse;\n    animation-duration: 1.5s;\n    animation-iteration-count: infinite;\n    animation-timing-function: linear;\n\n    background-color: #ff4646;\n    color: #fff;\n    border-color: transparent !important;\n  }\n"]);return o=function(){return e},e}var i=Object(c.a)(r.d.div(o()));n.a=i},309:function(e,n,t){"use strict";t.d(n,"a",(function(){return l}));var a=t(5),r=t(4);function c(){var e=Object(a.a)(["\n  padding: 5px 10px 5px 15px;\n  background: #f2f2f2;\n  border: 1px solid #ccc;\n  border-radius: 5px;\n  margin: 0px 0px 10px 0px;\n\n  & .recordContent {\n    display: flex;\n    align-items: center;\n\n    & .form-check-label {\n      flex: 1;\n      display: flex;\n      align-items: center;\n      font-weight: 550;\n      padding-right: 10px;\n    }\n\n    & .recordAction {\n      display: flex;\n      align-items: center;\n\n      & > * {\n        margin-right: 5px;\n        &:last-child {\n          margin-right: 0px;\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}function o(){var e=Object(a.a)(["\n  & .titleContent {\n    margin-bottom: 15px;\n\n    p {\n      font-size: 13px;\n    }\n  } \n\n  & .enrollContent {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-top: 15px;\n  }\n\n  & .mainBtn {\n    font-size: 15px !important;\n    margin-left: 5px;\n    margin-right: 5px;\n  }\n\n  & .resultContent {\n    & .ant-col {\n      text-align: center;\n\n      & h4 {\n        margin-bottom: 10px;\n      }\n\n      & .ant-alert {\n        width: 60%;\n        margin: 0 auto;\n      }\n    }\n  }\n\n  & .deleteVoice {\n    & p {\n      margin-bottom: 10px;\n    }\n  }\n"]);return o=function(){return e},e}var i=r.d.div(o()),l=r.d.div(c());n.b=i},319:function(e,n,t){"use strict";t.d(n,"b",(function(){return m}));var a=t(35),r=t.n(a),c=t(33),o=t(43),i=t(29),l=t(0),s=t(275),u={isRecording:!1,recorder:null,data:null,error:null},d=function(e,n){switch(n.type){case"start":case"stop":return Object(i.a)(Object(i.a)({},e),{},{isRecording:!1});case"startRecording":return Object(i.a)(Object(i.a)({},e),{},{isRecording:!0,recorder:n.payload.recorder});case"hasError":return Object(i.a)(Object(i.a)({},e),{},{isRecording:!1,error:n.payload.error});default:return e}},m=function(e,n){var t=Object(l.useReducer)(d,u),a=Object(o.a)(t,2),i=a[0],m=a[1],f=Object(l.useState)(0),p=Object(o.a)(f,2),v=p[0],b=p[1],E=function(n){var t=n.data;e(t)},O=function(){var e=Object(c.a)(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!i.isRecording){e.next=3;break}return e.abrupt("return");case 3:return m({type:"start"}),b(0),e.next=7,navigator.mediaDevices.getUserMedia({audio:!0});case 7:t=e.sent,a=new s.a(t,{mimeType:"audio/wav"}),m({type:"startRecording",payload:{recorder:a}}),a.start(),a.addEventListener("dataavailable",E),i.error&&m({type:"hasError",payload:{error:null}}),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(0),console.log("\ud83d\ude80 ~ state.error",e.t0),n(e.t0),m({type:"hasError",payload:{error:e.t0}});case 20:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();return Object(l.useEffect)((function(){return function(){i.recorder&&i.recorder.removeEventListener("dataavailable",(function(){}))}}),[i.recorder]),{start:O,stop:function(){try{var e=i.recorder;m({type:"stop"}),e&&("inactive"!==e.state&&e.stop(),e.removeEventListener("dataavailable",E))}catch(t){n(t),m({type:"hasError",payload:{error:t}})}},recorder:i.recorder,isRecording:i.isRecording,error:i.error,countdown:v}};n.a=m},356:function(e,n,t){"use strict";var a=t(43),r=t(0),c=t.n(r),o=t(577),i=t(578),l=t(61),s=t(319),u=t(45),d=t(68),m=t(281),f=t(189),p=t(282),v=t(309);n.a=function(e){var n=e.text,t=e.index,b=e.onSave,E=e.clear,O=Object(r.useState)(null),g=Object(a.a)(O,2),j=g[0],x=g[1],y=Object(s.b)((function(e){var n=new File([e],"audio_".concat(t,"_file.wav"),{type:e.type});b(n),x(window.URL.createObjectURL(e))}),(function(e){"NotAllowedError"===e.name&&Object(d.a)("error","record.permission")})),h=y.start,k=y.stop,w=y.isRecording,C=function(){b(null),x(null)};return Object(r.useEffect)((function(){"CLEAR"===E&&C()}),[E]),c.a.createElement(v.a,null,c.a.createElement("div",{className:"recordContent"},c.a.createElement("p",{className:"form-check-label"},n),c.a.createElement("div",{className:"recordAction"},!j&&c.a.createElement(m.a,{placement:"bottom",title:c.a.createElement(u.a,{id:"".concat(w?"common.stop":"record")})},c.a.createElement(p.a,null,c.a.createElement(l.a,{className:w&&"rec",shape:"circle",onClick:w?k:h,danger:w,icon:w?c.a.createElement(o.a,null):c.a.createElement(i.a,null)}))),!!j&&c.a.createElement(m.a,{placement:"bottom",title:c.a.createElement(u.a,{id:"voice.deleteRec"})},c.a.createElement("div",null,c.a.createElement(f.a,{onConfirm:C}))))),c.a.createElement("div",{className:"recordAudio"},!!j&&c.a.createElement("audio",{src:j,controls:!0})))}},707:function(e,n,t){"use strict";n.a={"There is no such user, aborting.":"voice.verifyEnrollErr","There is already such user, aborting.":"voice.alreadyEnroll","Successfully compaired voice footprint":"voice.failedErr"}}}]);