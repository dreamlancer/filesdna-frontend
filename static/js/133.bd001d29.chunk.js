/*! For license information please see 133.bd001d29.chunk.js.LICENSE.txt */
(this.webpackJsonpfilesdna=this.webpackJsonpfilesdna||[]).push([[133],{1408:function(e,t,n){(function(t){var o=n(1409),i=n(1411),a=n(35),r=n(1417),s=n(1418);e.exports=function(e){"use strict";var n=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(e);function u(e,t,n,o){return new(n||(n=Promise))((function(i,a){function r(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}u((o=o.apply(e,t||[])).next())}))}var c={};function l(e){var t=c[e];if(t)return t;var n=new Promise((function(t,n){var o=document.createElement("script");o.src=e,o.async=!0;var i=function(){t()};o.addEventListener("load",i),o.addEventListener("error",(function t(){o.removeEventListener("load",i),o.removeEventListener("error",t),delete c[e],o.remove(),n(new Error("Unable to load script "+e))})),document.body.appendChild(o)}));return c[e]=n,n}var d=function(){function e(t){var n=this;r(this,e),this.handleClick=function(){return u(n,void 0,void 0,a.mark((function e(){var t,n,o;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.config){e.next=3;break}throw new Error("google-pay-button: Missing configuration");case 3:return n=this.createLoadPaymentDataRequest(t),e.prev=4,e.next=7,this.client.loadPaymentData(n);case 7:o=e.sent,t.onLoadPaymentData&&t.onLoadPaymentData(o),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),"CANCELED"===e.t0.statusCode?t.onCancel&&t.onCancel(e.t0):t.onError?t.onError(e.t0):console.error(e.t0);case 14:case"end":return e.stop()}}),e,this,[[4,11]])})))},this.options=t}return s(e,[{key:"getElement",value:function(){return this.element}},{key:"isGooglePayLoaded",value:function(){var e,n;return"google"in(window||t)&&!!(null===(n=null===(e=null===google||void 0===google?void 0:google.payments)||void 0===e?void 0:e.api)||void 0===n?void 0:n.PaymentsClient)}},{key:"mount",value:function(e){return u(this,void 0,void 0,a.mark((function t(){return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.isGooglePayLoaded(),t.t0){t.next=4;break}return t.next=4,l("https://pay.google.com/gp/p/js/pay.js");case 4:this.element=e,e&&(this.appendStyles(),this.config&&this.updateElement());case 6:case"end":return t.stop()}}),t,this)})))}},{key:"unmount",value:function(){this.element=void 0}},{key:"configure",value:function(e){var t=void 0;return this.config=e,this.oldInvalidationValues&&!this.isClientInvalidated(e)||(t=this.updateElement()),this.oldInvalidationValues=this.getInvalidationValues(e),null!=t?t:Promise.resolve()}},{key:"createClientOptions",value:function(e){var t={environment:e.environment,merchantInfo:this.createMerchantInfo(e)};return(e.onPaymentDataChanged||e.onPaymentAuthorized)&&(t.paymentDataCallbacks={},e.onPaymentDataChanged&&(t.paymentDataCallbacks.onPaymentDataChanged=function(t){return e.onPaymentDataChanged(t)||{}}),e.onPaymentAuthorized&&(t.paymentDataCallbacks.onPaymentAuthorized=function(t){return e.onPaymentAuthorized(t)||{}})),t}},{key:"createIsReadyToPayRequest",value:function(e){var t=e.paymentRequest;return{apiVersion:t.apiVersion,apiVersionMinor:t.apiVersionMinor,allowedPaymentMethods:t.allowedPaymentMethods,existingPaymentMethodRequired:e.existingPaymentMethodRequired}}},{key:"createLoadPaymentDataRequest",value:function(e){return Object.assign(Object.assign({},e.paymentRequest),{merchantInfo:this.createMerchantInfo(e)})}},{key:"createMerchantInfo",value:function(e){var t=Object.assign({},e.paymentRequest.merchantInfo);return t.softwareInfo||(t.softwareInfo={id:this.options.softwareInfoId,version:this.options.softwareInfoVersion}),t}},{key:"isMounted",value:function(){return null!=this.element&&!1!==this.element.isConnected}},{key:"removeButton",value:function(){if(this.element instanceof ShadowRoot||this.element instanceof Element)for(var e=0,t=Array.from(this.element.children);e<t.length;e++){var n=t[e];"STYLE"!==n.tagName&&n.remove()}}},{key:"updateElement",value:function(){var e;return u(this,void 0,void 0,a.mark((function t(){var n,o,i,r,s,u,c;return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isMounted()){t.next=2;break}return t.abrupt("return");case 2:if(n=this.element,this.config){t.next=5;break}throw new Error("google-pay-button: Missing configuration");case 5:return this.removeButton(),this.client=new google.payments.api.PaymentsClient(this.createClientOptions(this.config)),o={buttonType:this.config.buttonType,buttonColor:this.config.buttonColor,buttonSizeMode:this.config.buttonSizeMode,buttonLocale:this.config.buttonLocale,onClick:this.handleClick},(i=null===(e=this.element)||void 0===e?void 0:e.getRootNode())instanceof ShadowRoot&&(o.buttonRootNode=i),r=this.client.createButton(o),this.setClassName(n,[n.className,"not-ready"]),n.appendChild(r),u=!1,t.prev=11,t.next=14,this.client.isReadyToPay(this.createIsReadyToPayRequest(this.config));case 14:s=t.sent,u=s.result&&!this.config.existingPaymentMethodRequired||s.result&&s.paymentMethodPresent&&this.config.existingPaymentMethodRequired||!1,t.next=21;break;case 18:t.prev=18,t.t0=t.catch(11),this.config.onError?this.config.onError(t.t0):console.error(t.t0);case 21:if(this.isMounted()){if(u){try{this.client.prefetchPaymentData(this.createLoadPaymentDataRequest(this.config))}catch(e){console.log("Error with prefetch",e)}this.setClassName(n,(n.className||"").split(" ").filter((function(e){return e&&"not-ready"!==e})))}this.isReadyToPay===(null==s?void 0:s.result)&&this.paymentMethodPresent===(null==s?void 0:s.paymentMethodPresent)||(this.isReadyToPay=!!(null==s?void 0:s.result),this.paymentMethodPresent=null==s?void 0:s.paymentMethodPresent,!this.config.onReadyToPayChange)||(c={isButtonVisible:u,isReadyToPay:this.isReadyToPay},this.paymentMethodPresent&&(c.paymentMethodPresent=this.paymentMethodPresent),this.config.onReadyToPayChange(c))}case 22:case"end":return t.stop()}}),t,this,[[11,18]])})))}},{key:"setClassName",value:function(e,t){var n=t.filter((function(e){return e})).join(" ");n?e.className=n:e.removeAttribute("class")}},{key:"appendStyles",value:function(){var e,t,n;if("undefined"!=typeof document){var o=null===(e=this.element)||void 0===e?void 0:e.getRootNode(),i="default-google-style-".concat(this.options.cssSelector.replace(/[^\w-]+/g,""),"-").concat(null===(t=this.config)||void 0===t?void 0:t.buttonLocale);if(o&&!(null===(n=o.getElementById)||void 0===n?void 0:n.call(o,i))){var a=document.createElement("style");a.id=i,a.type="text/css",a.innerHTML="\n          ".concat(this.options.cssSelector," {\n            display: inline-block;\n          }\n          ").concat(this.options.cssSelector,".not-ready {\n            width: 0;\n            height: 0;\n            overflow: hidden;\n          }\n        "),o instanceof Document&&o.head?o.head.appendChild(a):o.appendChild(a)}}}},{key:"isClientInvalidated",value:function(e){var t=this;return!this.oldInvalidationValues||this.getInvalidationValues(e).some((function(e,n){return e!==t.oldInvalidationValues[n]}))}},{key:"getInvalidationValues",value:function(e){var t,n;return[e.environment,e.existingPaymentMethodRequired,!!e.onPaymentDataChanged,!!e.onPaymentAuthorized,e.buttonColor,e.buttonType,e.buttonLocale,e.buttonSizeMode,e.paymentRequest.merchantInfo.merchantId,e.paymentRequest.merchantInfo.merchantName,null===(t=e.paymentRequest.merchantInfo.softwareInfo)||void 0===t?void 0:t.id,null===(n=e.paymentRequest.merchantInfo.softwareInfo)||void 0===n?void 0:n.version]}}]),e}(),f="google-pay-button-container";return function(e){o(c,e);var t=i(c);function c(){var e;return r(this,c),(e=t.apply(this,arguments)).manager=new d({cssSelector:"."+f,softwareInfoId:"@google-pay/button-react",softwareInfoVersion:"2.3.0"}),e.elementRef=n.default.createRef(),e}return s(c,[{key:"componentDidMount",value:function(){return u(this,void 0,void 0,a.mark((function e(){var t;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.elementRef.current,e.t0=t,!e.t0){e.next=6;break}return e.next=5,this.manager.mount(t);case 5:this.manager.configure(this.props);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"componentWillUnmount",value:function(){this.manager.unmount()}},{key:"componentDidUpdate",value:function(){this.manager.configure(this.props)}},{key:"render",value:function(){return n.default.createElement("div",{ref:this.elementRef,className:[f,this.props.className].filter((function(e){return e})).join(" "),style:this.props.style})}}]),c}(n.default.Component)}(n(0))}).call(this,n(122))},1409:function(e,t,n){var o=n(1410);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}},1410:function(e,t){function n(t,o){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,o)}e.exports=n},1411:function(e,t,n){var o=n(1412),i=n(1413),a=n(1414);e.exports=function(e){return function(){var t,n=o(e);if(i()){var r=o(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return a(this,t)}}},1412:function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},1413:function(e,t){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}},1414:function(e,t,n){var o=n(1415),i=n(1416);e.exports=function(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?i(e):t}},1415:function(e,t){function n(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},1416:function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},1417:function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},1418:function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}e.exports=function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}},1836:function(e,t,n){"use strict";n.r(t);var o=n(29),i=n(0),a=n.n(i),r=n(1408),s=n.n(r),u=n(214),c=n(68),l=n(123);t.default=function(e){var t,n=e.onSuccess,i=void 0===n?function(){}:n,r=e.pOptions,d=void 0===r?{}:r,f=u.a.prod&&!u.a.liveDev;return a.a.createElement(s.a,{buttonLocale:Object(l.q)()||"en",environment:f?"PRODUCTION":"TEST",buttonSizeMode:"fill",paymentRequest:{apiVersion:2,apiVersionMinor:0,allowedPaymentMethods:[{type:"CARD",parameters:{allowedAuthMethods:["PAN_ONLY","CRYPTOGRAM_3DS"],allowedCardNetworks:["MASTERCARD","VISA","DISCOVER","AMEX"]},tokenizationSpecification:{type:"PAYMENT_GATEWAY",parameters:{gateway:"stripe","stripe:version":"2018-10-31","stripe:publishableKey":u.a.stripeApiKey}}}],merchantInfo:{merchantId:f?u.a.gMerchantId:"",merchantName:"FilesDNA"},transactionInfo:Object(o.a)({totalPriceStatus:"FINAL",totalPriceLabel:"Total",totalPrice:((null===d||void 0===d||null===(t=d.total)||void 0===t?void 0:t.amount)||0).toString(),currencyCode:((null===d||void 0===d?void 0:d.currency)||"usd").toUpperCase()},(null===d||void 0===d?void 0:d.country)&&Object(o.a)({},{countryCode:d.country.toUpperCase()}))},onLoadPaymentData:function(e){var t,n;console.log("load payment data",e);var o,a=(null===e||void 0===e||null===(t=e.paymentMethodData)||void 0===t||null===(n=t.tokenizationData)||void 0===n?void 0:n.token)||"",r=a?JSON.parse(a):{};(null===r||void 0===r?void 0:r.id)?i({id:r.id,card_id:null===r||void 0===r||null===(o=r.card)||void 0===o?void 0:o.id}):Object(c.a)("error","payment.failed")},onCancel:function(){return Object(c.a)("error","payment.cancelled")},onError:function(){return Object(c.a)("error","payment.failed")}})}}}]);